{"version":3,"file":"js/editor.js","mappings":";;;;;AAAA,MAAMA,YAAY,GAAG,sBAAsB;AAE3C,eAAeC,eAAeA,CAAA,EAAE;EAC7B,IAAIC,oBAAoB,GAAGC,aAAa,CAACH,YAAY,CAAC;EACtD,IAAGE,oBAAoB,EAAC;IACvB,OAAOA,oBAAoB;EAC5B;;EAEH;EACA,IAAI;IACA,IAAIE,aAAa,GAAG,MAAMC,KAAK,CAAC,wBAAwB,CAAC;IACzD,IAAIC,SAAS,GAAG,MAAMF,aAAa,CAACG,IAAI,CAAC,CAAC;IAC1CC,aAAa,CAACR,YAAY,EAAEM,SAAS,EAAE,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC;IACtD,OAAOA,SAAS;EACpB,CAAC,CAAC,OAAOG,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;EAEnD;AAEA;AAGA,SAASN,aAAaA,CAACQ,GAAG,EAAE;EAC3B,MAAMC,OAAO,GAAGC,YAAY,CAACC,OAAO,CAACH,GAAG,CAAC;EACzC;EACA,IAAI,CAACC,OAAO,EAAE;IACb,OAAO,IAAI;EACZ;EACA,MAAMG,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC;EAChC,MAAMM,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB;EACA,IAAID,GAAG,CAACE,OAAO,CAAC,CAAC,GAAGL,IAAI,CAACM,MAAM,EAAE;IAChC;IACA;IACAR,YAAY,CAACS,UAAU,CAACX,GAAG,CAAC;IAC5B,OAAO,IAAI;EACZ;EACA,OAAOI,IAAI,CAACQ,KAAK;AAClB;AAEA,SAASf,aAAaA,CAACG,GAAG,EAAEY,KAAK,EAAEC,GAAG,EAAE;EACpC,MAAMN,GAAG,GAAG,IAAIC,IAAI,CAAC,CAAC;EACtB;EACA;EACA,MAAMJ,IAAI,GAAG;IACTQ,KAAK,EAAEA,KAAK;IACZF,MAAM,EAAEH,GAAG,CAACE,OAAO,CAAC,CAAC,GAAGI;EAC5B,CAAC;EAGDX,YAAY,CAACY,OAAO,CAACd,GAAG,EAAEK,IAAI,CAACU,SAAS,CAACX,IAAI,CAAC,CAAC;AACnD;AAEAY,MAAM,CAACC,gBAAgB,CAAC,MAAM,EAAE,kBAAkB;EAE9ClB,OAAO,CAACmB,GAAG,CAAC,eAAe,CAAC;EAC5B,IAAIC,YAAY,GAAG,MAAM7B,eAAe,CAAC,CAAC;EAC1CS,OAAO,CAACmB,GAAG,CAAC,sBAAsB,EAAEC,YAAY,CAAC;EACjD,IAAGA,YAAY,CAACC,WAAW,EAAC;IAGxB,IAAIC,aAAa,GAAGC,QAAQ,CAACC,aAAa,CAAC,4BAA4B,CAAC;IACxEF,aAAa,CAACG,WAAW,GAAGL,YAAY,CAACM,IAAI,GAAG,GAAG,GAAGN,YAAY,CAACC,WAAW;EAClF,CAAC,MAAM,CACP;AAEF,CAAC,CAAC,C","sources":["webpack://three-ships-theme/./resources/js/editor.js"],"sourcesContent":["const LOCATION_KEY = 'three_ships_location';    \n\nasync function getLocationData(){\n   let three_ships_location = getWithExpiry(LOCATION_KEY);\n   if(three_ships_location){\n    return three_ships_location;\n   }\n\n//    let ipAddress = await getIpAddress();\ntry {\n    let ipapiResponse = await fetch('https://ipapi.co/json/');\n    let ipapiData = await ipapiResponse.json();\n    setWithExpiry(LOCATION_KEY, ipapiData, 1000 * 60 * 60)\n    return ipapiData;\n} catch (error) {\n    console.error('Error getting location:', error);\n\n}\n\n}\n\n\nfunction getWithExpiry(key) {\n\tconst itemStr = localStorage.getItem(key)\n\t// if the item doesn't exist, return null\n\tif (!itemStr) {\n\t\treturn null\n\t}\n\tconst item = JSON.parse(itemStr)\n\tconst now = new Date()\n\t// compare the expiry time of the item with the current time\n\tif (now.getTime() > item.expiry) {\n\t\t// If the item is expired, delete the item from storage\n\t\t// and return null\n\t\tlocalStorage.removeItem(key)\n\t\treturn null\n\t}\n\treturn item.value\n}\n\nfunction setWithExpiry(key, value, ttl) {\n    const now = new Date()\n    // `item` is an object which contains the original value\n    // as well as the time when it's supposed to expire\n    const item = {\n        value: value,\n        expiry: now.getTime() + ttl,\n    }\n\n\n    localStorage.setItem(key, JSON.stringify(item))\n}\n\nwindow.addEventListener('load', async function () {\n\n    console.log('window loaded');\n    let locationData = await getLocationData();\n    console.log(\"here is locationData\", locationData);\n    if(locationData.region_code){\n\n        \n        let regionElement = document.querySelector('#three-ships-user-location');\n        regionElement.textContent = locationData.city + \" \" + locationData.region_code;\n    } else {\n    }\n\n  })\n"],"names":["LOCATION_KEY","getLocationData","three_ships_location","getWithExpiry","ipapiResponse","fetch","ipapiData","json","setWithExpiry","error","console","key","itemStr","localStorage","getItem","item","JSON","parse","now","Date","getTime","expiry","removeItem","value","ttl","setItem","stringify","window","addEventListener","log","locationData","region_code","regionElement","document","querySelector","textContent","city"],"sourceRoot":""}